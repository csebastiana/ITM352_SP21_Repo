<!-- Chavez Ancheta's Login HTML for Assignment 3-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Login</title>
    <!-- linking the stylesheets -->
    <link rel="stylesheet" href="./stylesheets/navbar.css">
    <link rel="stylesheet" href="./stylesheets/products-style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Arvo">
    <!-- giving this page some character -->
    <style>
        body {
            text-align: center;
            font-family: 'Arvo', 'Open Sans';
            color: rgb(66, 3, 78);
            background-image: url(./images/creepyuno.png);
        }
    </style>

    <script>
        // Borrowed and modified code from Lab 13 and 14 
        // Informs user if error is present in username and/or password
        let params = (new URL(document.location)).searchParams;
        window.onload = function () {
            if (params.has('LogError')) {
                username.value = params.get('username'); // Sticky button 
                alert('Invalid Username or Password');
            }
        }
    </script>
</head>

<body>
    <!-- making a list -->
    <ul>
        <li style="float:left"><a href="./index.html">Just A Quick Peeker</a></li>
        <li><a href="./products_display.html">Stickers</a></li>
        <li style="float:right"><a href="./cart.html">Shopping Cart</a></li>
        <li style="float:right"><a href="./register.html">Register</a></li>
        <li style="float:right"><a class="active" href="./login.html">Login</a></li>
    </ul>

    <h2><mark>Login to your JAQP Account Here</mark></h2>
    <!-- Header to give the page some flair and to tell the users what the page is for.-->
    </section>
    <br>
    <div id=login>
        <!-- this is the login form made with help from lab 14-->
        <form name="login_form" action="process_login" method="POST">

            <center><input type="text" id="user" name="username" size="40" placeholder="Enter Username">
                <span id="username_message"></span>
            </center>
            <center><input type="password" name="password" size="40" placeholder="Enter Password">
                <span id="password_message"></span><br />
            </center>
            <center><input type="submit" value="Log In" ac name="submit"></center>
        </form>
    </div>

    <script>
        // Learned via Alyssa Mencel's Assignment 3 as well as W3 Schools. 
        function setCookie(cname, cvalue, exdays,) { //sets cookie
            var d = new Date(); //today's date
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000)); //expiration is set to a day after inital login
            var expires = "expires=" + d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }
        function logOut() { // got code from stackoverflow, destroys all cookies and reloads the current page
    var cookies = document.cookie.split(";");

    for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        var eqPos = cookie.indexOf("=");
        var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
        document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
    }
    location.reload();
}
    </script>
</body>

</html>